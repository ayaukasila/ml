<!DOCTYPE html>
<html>
<head>
    <title>Fake News Detection</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input[type='text'] { width: 100%; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 20px; }
        #examples a { cursor: pointer; color: blue; text-decoration: underline; }
        img { margin-top: 20px; max-width: 100%; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h2>Fake News Detection</h2>
    <input type="text" id="news_input" placeholder="Enter news text here...">
    <button onclick="predictNews()">Проверить</button>

    <h3>Примеры новостей:</h3>
    <div id="examples">
        <a onclick="document.getElementById('news_input').value = 'NASA finds evidence of life on Mars.'">NASA finds evidence of life on Mars.</a><br>
        <a onclick="document.getElementById('news_input').value = 'COVID-19 vaccine turns people into zombies.'">COVID-19 vaccine turns people into zombies.</a><br>
        <a onclick="document.getElementById('news_input').value = 'Bitcoin will be banned worldwide in 2024.'">Bitcoin will be banned worldwide in 2024.</a><br>
    </div>

    <div id="result"></div>
    <img id="chart" />

    <script>
        function predictNews() {
            const news_text = document.getElementById('news_input').value;
            fetch('http://0.0.0.0:8000/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `news_text=${encodeURIComponent(news_text)}`
            })
            .then(response => response.json())
            .then(data => {
                let resultHTML = `<h3>Результат: ${data.label.toUpperCase()}</h3>`;

                if (data.label === 'fake') {
                    resultHTML += '<h4>Возможно, это фейк. Вот что я нашел в Google:</h4><ul>';
                    data.search_results.forEach(url => {
                        resultHTML += `<li><a href="${url}" target="_blank">${url}</a></li>`;
                    });
                    resultHTML += '</ul>';
                }
                document.getElementById('result').innerHTML = resultHTML;

                // Обновляем BarChart
                fetch('http://0.0.0.0:8000/chart')
                    .then(response => response.json())
                    .then(chartData => {
                        document.getElementById('chart').src = 'data:image/png;base64,' + chartData.chart;
                    });
            });
        }
    </script>
</body>
</html>
